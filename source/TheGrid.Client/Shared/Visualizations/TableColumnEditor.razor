@if (Options != null)
{
    <RadzenTemplateForm Data="Options" Submit="@((TableVisualizationOptions options) => { Submit(options); })">
        <RadzenRow>
            <RadzenColumn>
                <RadzenStack>
                    @foreach (var column in Options.Columns)
                    {
                        <RadzenRow>
                            <RadzenColumn>
                                <RadzenText Text="@column.Key" Style="font-weight: bold;" />
                            </RadzenColumn>
                            <RadzenColumn>
                                <RadzenRow AlignItems="AlignItems.End">
                                    <RadzenColumn>
                                        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center">
                                            <RadzenLabel Text="Visible" />
                                            <RadzenSwitch @bind-Value="@column.Value.Visible" />
                                        </RadzenStack>
                                    </RadzenColumn>
                                </RadzenRow>
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenStack Orientation="Orientation.Vertical">
                            <RadzenFormField Text="Type">
                                <RadzenDropDown Data="_columnTypes" @bind-Value="@column.Value.Type" />
                            </RadzenFormField>
                            <RadzenFormField Text="Display Name">
                                <RadzenTextBox @bind-Value="column.Value.DisplayName" />
                                <RadzenLengthValidator Max="50" />
                            </RadzenFormField>
                            @if (column.Value.Type is not QueryResultColumnType.Text)
                            {
                                <RadzenFormField Text="Display Format">
                                    <RadzenTextBox @bind-Value="column.Value.DisplayFormat" />
                                    <RadzenLengthValidator Max="50" />
                                </RadzenFormField>
                            }
                            <RadzenFormField Text="Display Template">
                                <RadzenTextBox @bind-Value="column.Value.DisplayTemplate" Placeholder="@("{{ @" + column.Key + " }}")" />
                                <RadzenLengthValidator Max="150" />
                            </RadzenFormField>
                        </RadzenStack>
                    }
                </RadzenStack>
            </RadzenColumn>
        </RadzenRow>
    </RadzenTemplateForm>
}


@code {

    private IEnumerable<QueryResultColumnType> _columnTypes = Enum.GetValues(typeof(QueryResultColumnType)).Cast<QueryResultColumnType>();

    [Parameter]
    [EditorRequired]
    public TableVisualizationOptions? Options { get; set; }

    private void Submit(TableVisualizationOptions options)
    {
        
    }
}
