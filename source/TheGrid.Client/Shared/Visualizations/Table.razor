@inherits TheGridComponentBase

<RadzenDataGrid
    Data="_data"
    TItem="Dictionary<string, object>"
    Count="_totalItems"
    LoadData="OnLoadDataAsync"
    IsLoading="_isLoading"
    AllowPaging
    Style="height: 100%;"
    PageSize="15"
    AllowSorting="false"
    Density="Density.Compact"
    ColumnResized="OnColumnResize">
    <Columns>
        @foreach (var kv in TableVisualization.ColumnOptions.OrderBy(c => c.Value.DisplayOrder))
        {
            <RadzenDataGridColumn
                TItem="Dictionary<string, object>"
                Title="@(kv.Value.DisplayName ?? kv.Key)"
                Type="@GetTypeForColumnType(kv.Value.Type)"
                Property="@kv.Key">
                <Template>
                    @if (kv.Value.Type == QueryResultColumnType.Text)
                    {
                        @context[kv.Key]
                    }
                    else
                    {
                        var value = context[kv.Key];

                        if (value != null)
                        {
                            if (kv.Value.Type == QueryResultColumnType.DateTime && value is DateTime dateTimeValue)
                            {
                                @dateTimeValue.ToString()
                            }
                        }
                    }
                </Template>
            </RadzenDataGridColumn>
        }
    </Columns>
</RadzenDataGrid>